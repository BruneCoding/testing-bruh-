<script src="https://kit.fontawesome.com/cd9d6500a7.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="styles.css">
<div class="sideCategory">
  <div class="categoryHolder">
    <h1> Images </h1>
  </div>
  <div class="categoryHolder">
    <h1> Videos </h1>
  </div>
  <div class="categoryHolder">
    <h1> Maps </h1>
  </div>
  <div class="categoryHolder">
    <h1> News </h1>
  </div>
  <div class="categoryHolder">
    <h1> Shop </h1>
  </div>
</div>

<div class="searchBar">
  <div class="inputHold">
    <!-- search icon -->
    <i class="fa-solid fa-magnifying-glass"></i>
    <!-- input -->
    <form id="search-form">
      <input id="query" type="text" class="searchInput" placeholder="Search Brungle ... " href=""></input>
    </form>
  </div>

  <!--  file icon  -->
  <i style="transform: rotate(-35deg); margin-right: 15px; margin-left: -35px;" class="fa-solid          fa-paperclip"></i>
  <hr>
  <!-- microphone icon -->
  <i style="margin-right: 15px; margin-left: -37.5px;" class="fa-solid fa-microphone"></i>

</div>

<div class="result-container">
  <div class="result">

  </div>
  <div class="result">

  </div>
  <div class="result">

  </div>
  <div class="result">

  </div>
</div>
<div class="nodeSummarize">
  <h1> Node<span>AI</span>
    <rtc />
  </h1>
  <h5> Based on Gemini Flash</h5>
  <br>
  <p id="ai-summarized">Loading...</p>
</div>
<script src="script.js"></script>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDlXV7XQrKKu9KxceEhKF2toGtUiTXR8QU",
    authDomain: "testing-brungle-54a9f.firebaseapp.com",
    databaseURL: "https://testing-brungle-54a9f-default-rtdb.firebaseio.com",
    projectId: "testing-brungle-54a9f",
    storageBucket: "testing-brungle-54a9f.appspot.com",
    messagingSenderId: "558119080810",
    appId: "1:558119080810:web:0b35d83f64d488ae5d4b13"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  window.addEventListener("DOMContentLoaded", async () => {
    try {
      const querySnap = await get(ref(db, "search/query"));
      const queryText = querySnap.val();
      console.log("Query received from Firebase:", queryText);

      const input = document.getElementById("query");
      if (queryText && input) {
        input.value = queryText;
        console.log("Input field filled.");
        // Trigger Enter key programmatically
        const event = new KeyboardEvent("keydown", {
          key: "Enter",
          bubbles: true,
        });
        input.dispatchEvent(event);
      } else {
        console.log("Input element not found or query empty.");
      }
    } catch (err) {
      console.error("Error reading from Firebase:", err);
    }
  });
</script>
